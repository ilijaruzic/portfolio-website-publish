import{R as e,r as t,C as a,c as r,u as s,j as i,T as l,D as o,E as n,S as d}from"./vendor-react-CqqHOjbk.js";import{S as c}from"./index-CZsN392c.js";import{I as m}from"./Intro-CLxSaCOV.js";import"./vendor-other-B5mEX6f0.js";import"./vendor-i18n-CnKatMdP.js";const x=t.forwardRef(({siteKey:e,action:a="contact"},r)=>(t.useEffect(()=>{let t;return window.grecaptcha||(t=document.createElement("script"),t.src=`https://www.google.com/recaptcha/enterprise.js?render=${e}`,t.async=!0,t.defer=!0,t.id="recaptcha-script",document.head.appendChild(t)),()=>{const e=document.querySelector(".grecaptcha-badge");(null==e?void 0:e.parentNode)&&e.parentNode.removeChild(e),t&&t.parentNode&&t.parentNode.removeChild(t),delete window.grecaptcha}},[e]),t.useImperativeHandle(r,()=>({getToken:()=>new Promise((t,r)=>{if(!window.grecaptcha||!window.grecaptcha.enterprise)return r();window.grecaptcha.enterprise.ready(()=>{window.grecaptcha.enterprise.execute(e,{action:a}).then(t).catch(r)})})})),null)),b=e.memo(x),p=e.memo(function(){const{register:e,handleSubmit:o,reset:n,formState:{errors:d}}=a({defaultValues:{name:"",email:"",subject:"",message:"",privacyPolicy:!1}}),c=t.useRef(),m=r(),{t:x}=s(),[p,h]=t.useState(!1),[u,f]=t.useState(""),[k,g]=t.useState("item-1"),[j,w]=t.useState(!1);return i.jsxs(i.Fragment,{children:[i.jsxs("form",{acceptCharset:"UTF-8",method:"POST",className:"lg:max-w-screen-md space-y-8",onSubmit:o(async e=>{var t;h(!0),f("");try{const a="contact",r=await(null==(t=c.current)?void 0:t.getToken());if(!r)return f("[error]: reCAPTCHA not loaded or failed"),void h(!1);let s;s="item-1"===k?x("contact.form.subject.formatted.item-1"):e.subject;const i={...e,subject:s},{iv:l,data:o}=await async function(e){const t=Uint8Array.from(atob("V1SxF0mcZUt8pLrH7bJ9FOpR+Vjm/SFkKNrOXvBTzQ0="),e=>e.charCodeAt(0)),a=await crypto.subtle.importKey("raw",t,"AES-GCM",!1,["encrypt"]),r=crypto.getRandomValues(new Uint8Array(12)),s=(new TextEncoder).encode(JSON.stringify(e)),i=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},a,s),l=new Uint8Array(i);return{iv:btoa(String.fromCharCode(...r)),data:btoa(String.fromCharCode(...l))}}(i),d={encryptedData:o,iv:l,recaptchaToken:r,expectedAction:a},b=await fetch("https://portfolio-website-contact-form.ilijaruzicx.workers.dev",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},body:JSON.stringify(d)}),p=await b.json();if(!b.ok)return f(`[error]: ${null==p?void 0:p.error}`||"[error]: unknown error"),void h(!1);(null==p?void 0:p.success)?(n(),m("../thank-you"),setTimeout(()=>m("../"),5e3)):f(`[error]: ${null==p?void 0:p.error}`||"[error]: unexpected response")}catch(a){f("[error]: unexpected error occurred, try again later")}finally{h(!1)}}),noValidate:!0,children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"name",className:"text-md md:text-lg font-semibold block mb-2",children:[x("contact.form.name.title"),i.jsx("span",{className:"text-black dark:text-white",children:" *"})]}),i.jsx("input",{...e("name",{required:!0,maxLength:20,pattern:/^(?!.*\d)[\p{L}\p{M}*]+(?: [\p{L}\p{M}*]+)*$/u}),type:"text",id:"name",name:"name",className:"block w-full p-3 border border-black rounded-md bg-white text-black dark:bg-black dark:text-white dark:border-white",disabled:p,"aria-invalid":d.name?"true":"false"}),d.name&&i.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:x(`contact.form.name.errors.${d.name.type}`)})]}),i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"email",className:"text-md md:text-lg font-semibold block mb-2",children:[x("contact.form.email.title"),i.jsx("span",{className:"text-black dark:text-white",children:" *"})]}),i.jsx("input",{...e("email",{required:!0,pattern:/^[\p{L}\p{M}\d._%+-]+@[^\W_]+[\p{L}\p{M}\d.-]+\.[\p{L}\p{M}]{2,}$/u}),type:"text",id:"email",name:"email",className:"block w-full p-3 border border-black rounded-md bg-white text-black dark:bg-black dark:text-white dark:border-white",disabled:p,"aria-invalid":d.email?"true":"false"}),d.email&&i.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:x(`contact.form.email.errors.${d.email.type}`)})]}),i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"subject",className:"text-md md:text-lg font-semibold block mb-2",children:[x("contact.form.subject.title"),i.jsx("span",{className:"text-black dark:text-white",children:" *"})]}),i.jsxs("div",{className:"mb-3 border border-black dark:border-white rounded-md bg-white dark:bg-black",children:[i.jsxs("button",{type:"button",onClick:()=>w(!j),className:"flex items-center justify-between w-full p-3 text-black dark:text-white outline-none",disabled:p,"aria-haspopup":"true","aria-expanded":j,children:[i.jsx("span",{children:x(`contact.form.subject.options.${k}`)}),i.jsx("svg",{className:"w-4 h-4 ml-2 transition-transform duration-300 "+(j?"rotate-180":""),fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),i.jsxs("div",{className:"transition-all duration-300 overflow-hidden "+(j?"max-h-40":"max-h-0"),children:[i.jsx("div",{className:"h-px bg-black dark:bg-white"}),i.jsx("button",{type:"button",onClick:()=>{g("item-1"),w(!1)},className:"w-full text-left p-3 text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200 outline-none border-0",children:x("contact.form.subject.options.item-1")}),i.jsx("button",{type:"button",onClick:()=>{g("item-2"),w(!1)},className:"w-full text-left p-3 text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200 outline-none border-0",children:x("contact.form.subject.options.item-2")})]})]}),"item-2"===k&&i.jsx("input",{...e("subject",{required:"item-2"===k,maxLength:100}),type:"text",id:"subject",name:"subject",className:"block w-full p-3 border border-black rounded-md bg-white text-black dark:bg-black dark:text-white dark:border-white",disabled:p,"aria-invalid":d.subject?"true":"false"}),d.subject&&"item-2"===k&&i.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:x(`contact.form.subject.errors.${d.subject.type}`)})]}),i.jsxs("div",{className:"sm:col-span-2",children:[i.jsxs("label",{htmlFor:"message",className:"text-md md:text-lg font-semibold block mb-2",children:[x("contact.form.message.title"),i.jsx("span",{className:"text-black dark:text-white",children:" *"})]}),i.jsx("textarea",{...e("message",{required:!0,minLength:10,maxLength:1e4}),id:"message",name:"message",rows:"10",className:"block w-full p-3 border border-black rounded-md bg-white text-black dark:bg-black dark:text-white dark:border-white resize-none",disabled:p,"aria-invalid":d.message?"true":"false"}),d.message&&i.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:x(`contact.form.message.errors.${d.message.type}`)})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"inline-flex items-center space-x-2",children:[i.jsxs("label",{htmlFor:"privacyPolicy",className:"relative inline-flex items-center cursor-pointer select-none",children:[i.jsx("input",{...e("privacyPolicy",{required:!0}),id:"privacyPolicy",type:"checkbox",disabled:p,"aria-invalid":d.privacyPolicy?"true":"false",className:"sr-only peer"}),i.jsx("div",{className:`\n                  w-2.5 md:w-3.5 h-2.5 md:h-3.5 rounded-sm\n                  bg-indigo-500 hover:bg-indigo-400\n                  dark:bg-indigo-200 dark:hover:bg-indigo-300\n                  transition-colors duration-200\n                  ${p?"opacity-50 cursor-not-allowed":""}\n                `}),i.jsx("svg",{className:"absolute top-0.35 left-0.35 peer-checked:block hidden w-2.5 md:w-3.5 h-2.5 md:h-3.5 text-white dark:text-black",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})]}),i.jsxs("span",{className:"text-xs md:text-sm lg:text-base text-black dark:text-white",children:[i.jsx(l,{i18nKey:"contact.form.privacyPolicy.label",children:i.jsx("a",{href:"/policies/privacy",target:"_blank",rel:"noopener noreferrer",className:"underline font-bold",children:"privacy policy"})}),i.jsx("span",{className:"text-black dark:text-white",children:" *"})]})]}),d.privacyPolicy&&i.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:x(`contact.form.privacyPolicy.errors.${d.privacyPolicy.type}`)})]}),i.jsx("button",{type:"submit",className:"md:transform md:hover:scale-110 md:transition-all md:duration-300 text-md text-white rounded-lg px-4 md:px-5 py-3 md:py-4 text-center mr-3 md:mr-0 min-h-[48px]\n            "+(p?"bg-indigo-400 cursor-not-allowed":"bg-indigo-500 hover:bg-indigo-400 dark:bg-indigo-200 dark:text-black dark:hover:bg-indigo-300"),"aria-label":x("contact.form.submission"),disabled:p,children:x(p?"contact.form.submitting":"contact.form.submission")}),u&&i.jsx("p",{className:"mt-4 text-sm text-red-600 dark:text-red-300",role:"alert",children:u})]}),i.jsx(b,{ref:c,siteKey:"6LdzpqwpAAAAAHMGS_mfybgvANIGXoIlrcTH2iij",action:"contact"})]})}),h=e.memo(function(){t.useEffect(()=>{window.scrollTo(0,0)},[]);const{t:e}=s();return i.jsxs("div",{id:"contact",className:"Contact flex flex-col min-h-screen w-4/5 mx-auto bg-white text-black dark:bg-black dark:text-white pt-24 md:pt-36 lg:pt-48",children:[i.jsx(c,{title:`${e("contact.title")} | ilijaruzic.rs`,description:e("contact.description"),robots:"index, follow"}),i.jsx(m,{heading:e("contact.title"),paragraphs:[e("contact.subtitle")]}),i.jsx("div",{className:"pt-6 pb-12",children:i.jsxs("dl",{className:"max-w-md text-black divide-y divide-indigo-400 dark:text-white dark:divide-indigo-200",children:[i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"md:transform md:hover:scale-110 md:transition-all md:duration-300 md:origin-left flex flex-row gap-4 items-center",children:[i.jsx("dt",{className:"text-base xd:text-lg sm:text-xl",children:i.jsx(o,{className:"text-black dark:text-white"})}),i.jsx("dd",{className:"text-sm xd:text-base sm:text-lg font-semibold",children:i.jsx("a",{href:`mailto:${e("contact.email-link")}`,children:e("contact.email-link")})})]})}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"md:transform md:hover:scale-110 md:transition-all md:duration-300 md:origin-left flex flex-row gap-4 items-center",children:[i.jsx("dt",{className:"text-base xd:text-lg sm:text-xl",children:i.jsx(n,{className:"text-black dark:text-white"})}),i.jsx("dd",{className:"text-sm xd:text-base sm:text-lg font-semibold",children:i.jsx("a",{href:"tel:+381642430615",target:"_blank",rel:"noreferrer",children:"+381 64 2430615"})})]})}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"md:transform md:hover:scale-110 md:transition-all md:duration-300 md:origin-left flex flex-row gap-4 items-center",children:[i.jsx("dt",{className:"text-base xd:text-lg sm:text-xl",children:i.jsx(d,{className:"text-black dark:text-white"})}),i.jsx("dd",{className:"text-sm xd:text-base sm:text-lg font-semibold",children:i.jsx("a",{href:"https://ko-fi.com/ilijaruzic",target:"_blank",rel:"external nofollow noopener noreferrer",children:e("contact.coffee-link")})})]})})]})}),i.jsx(p,{})]})});export{h as default};
