import{R as e,r as t,C as a,c as r,u as s,j as l,T as o,D as n,E as i,S as c}from"./vendor-react-CqqHOjbk.js";import{S as d}from"./index-CmxMPSSz.js";import{I as m}from"./Intro-CLxSaCOV.js";import"./vendor-other-B5mEX6f0.js";import"./vendor-i18n-CnKatMdP.js";const x=t.forwardRef(({siteKey:e,action:a="contact"},r)=>(t.useEffect(()=>{let t;return window.grecaptcha||(t=document.createElement("script"),t.src=`https://www.google.com/recaptcha/enterprise.js?render=${e}`,t.async=!0,t.defer=!0,t.id="recaptcha-script",document.head.appendChild(t)),()=>{const e=document.querySelector(".grecaptcha-badge");(null==e?void 0:e.parentNode)&&e.parentNode.removeChild(e),t&&t.parentNode&&t.parentNode.removeChild(t),delete window.grecaptcha}},[e]),t.useImperativeHandle(r,()=>({getToken:()=>new Promise((t,r)=>{if(!window.grecaptcha||!window.grecaptcha.enterprise)return r();window.grecaptcha.enterprise.ready(()=>{window.grecaptcha.enterprise.execute(e,{action:a}).then(t).catch(r)})})})),null)),h=e.memo(x),u=e.memo(function(){const{register:e,handleSubmit:n,reset:i,formState:{errors:c}}=a({defaultValues:{name:"",email:"",subject:"",message:"",privacyPolicy:!1}}),d=t.useRef(),m=t.useRef(),x=t.useRef();t.useRef();const u=t.useRef(),p=t.useRef(),b=r(),{t:f}=s(),[g,k]=t.useState(!1),[j,w]=t.useState(""),[v,y]=t.useState(""),[N,S]=t.useState(!1),[C,A]=t.useState(""),[T,$]=t.useState(""),[F,L]=t.useState(""),[P,R]=t.useState(""),[M,W]=t.useState(""),[E,z]=t.useState(!1),[B,q]=t.useState(!1),[I,O]=t.useState(!1),[U,_]=t.useState(!1);return t.useEffect(()=>{const e=f("contact.form.name.placeholder"),t=f("contact.form.email.placeholder"),a=f("contact.form.subject.placeholder"),r=f("contact.form.subject.other-placeholder"),s=f("contact.form.message.placeholder");let l=0,o=0,n=0,i=0,c=0;const d=(e,t)=>{const{textWidth:a,inputWidth:r}=((e,t)=>{if(!t.current)return{textWidth:0,inputWidth:0};const a=document.createElement("canvas").getContext("2d"),r=window.getComputedStyle(t.current),s=r.fontSize,l=r.fontFamily;return a.font=`${s} ${l}`,{textWidth:a.measureText(e).width,inputWidth:"BUTTON"===t.current.tagName||"SPAN"===t.current.tagName?t.current.offsetWidth-60:t.current.offsetWidth-24}})(e,t);if(a>r&&r>0){let t=Math.floor(e.length*(r/a));return"..."+e.slice(e.length-t)}return e},h=setInterval(()=>{if(!E&&l<=e.length){const t=e.slice(0,l);A(d(t,m)),l++}else!E&&l>e.length+20?l=0:E||l++;if(!B&&o<=t.length){const e=t.slice(0,o);$(d(e,x)),o++}else!B&&o>t.length+20?o=0:B||o++;if(n<a.length){const e=a.slice(0,n+1);L(d(e,u)),n++}else n>=a.length&&n<a.length+20?(L(d(a,u)),n++):n=0;if(!I&&i<=r.length){const e=r.slice(0,i);R(d(e,p)),i++}else!I&&i>r.length+20?i=0:I||i++;!U&&c<=s.length?(W(s.slice(0,c)),c++):!U&&c>s.length+20?c=0:U||c++},80);return()=>clearInterval(h)},[f,E,B,I,U]),l.jsxs(l.Fragment,{children:[l.jsxs("form",{acceptCharset:"UTF-8",method:"POST",className:"lg:max-w-screen-md space-y-8",onSubmit:n(async e=>{var t;k(!0),w("");try{const a="contact",r=await(null==(t=d.current)?void 0:t.getToken());if(!r)return w("[error]: reCAPTCHA not loaded or failed"),void k(!1);let s;if("item-1"===v)s=f("contact.form.subject.formatted.item-1");else if("item-2"===v)s=f("contact.form.subject.formatted.item-2");else{if("item-3"!==v)return w("[error]: Please select a subject"),void k(!1);s=e.subject}const l={...e,subject:s},{iv:o,data:n}=await async function(e){const t=Uint8Array.from(atob("V1SxF0mcZUt8pLrH7bJ9FOpR+Vjm/SFkKNrOXvBTzQ0="),e=>e.charCodeAt(0)),a=await crypto.subtle.importKey("raw",t,"AES-GCM",!1,["encrypt"]),r=crypto.getRandomValues(new Uint8Array(12)),s=(new TextEncoder).encode(JSON.stringify(e)),l=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},a,s),o=new Uint8Array(l);return{iv:btoa(String.fromCharCode(...r)),data:btoa(String.fromCharCode(...o))}}(l),c={encryptedData:n,iv:o,recaptchaToken:r,expectedAction:a},m=await fetch("https://portfolio-website-contact-form.ilijaruzicx.workers.dev",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},body:JSON.stringify(c)}),x=await m.json();if(!m.ok)return w(`[error]: ${null==x?void 0:x.error}`||"[error]: unknown error"),void k(!1);(null==x?void 0:x.success)?(i(),b("../thank-you"),setTimeout(()=>b("../"),5e3)):w(`[error]: ${null==x?void 0:x.error}`||"[error]: unexpected response")}catch(a){w("[error]: unexpected error occurred, try again later")}finally{k(!1)}}),noValidate:!0,children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"name",className:"text-md md:text-lg font-semibold block mb-2",children:[f("contact.form.name.title"),l.jsx("span",{className:"text-black dark:text-white",children:" *"})]}),l.jsx("input",{...e("name",{required:!0,maxLength:20,pattern:/^(?!.*\d)[\p{L}\p{M}*]+(?: [\p{L}\p{M}*]+)*$/u}),ref:m,type:"text",id:"name",name:"name",placeholder:E?"":C,onFocus:()=>z(!0),onBlur:e=>!e.target.value&&z(!1),className:"block w-full p-3 border border-black rounded-md bg-white text-black dark:bg-black dark:text-white dark:border-white focus:outline-none focus:shadow-lg focus:scale-[1.01] transition-all duration-200 placeholder:text-sm placeholder:opacity-70",disabled:g,"aria-invalid":c.name?"true":"false"}),c.name&&l.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:f(`contact.form.name.errors.${c.name.type}`)})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"email",className:"text-md md:text-lg font-semibold block mb-2",children:[f("contact.form.email.title"),l.jsx("span",{className:"text-black dark:text-white",children:" *"})]}),l.jsx("input",{...e("email",{required:!0,pattern:/^[\p{L}\p{M}\d._%+-]+@[^\W_]+[\p{L}\p{M}\d.-]+\.[\p{L}\p{M}]{2,}$/u}),ref:x,type:"text",id:"email",name:"email",placeholder:B?"":T,onFocus:()=>q(!0),onBlur:e=>!e.target.value&&q(!1),className:"block w-full p-3 border border-black rounded-md bg-white text-black dark:bg-black dark:text-white dark:border-white focus:outline-none focus:shadow-lg focus:scale-[1.01] transition-all duration-200 placeholder:text-sm placeholder:opacity-70",disabled:g,"aria-invalid":c.email?"true":"false"}),c.email&&l.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:f(`contact.form.email.errors.${c.email.type}`)})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"subject",className:"text-md md:text-lg font-semibold block mb-2",children:[f("contact.form.subject.title"),l.jsx("span",{className:"text-black dark:text-white",children:" *"})]}),l.jsxs("div",{className:"mb-3 border border-black dark:border-white rounded-md bg-white dark:bg-black transition-all duration-200 "+(N?"shadow-lg scale-[1.01]":""),children:[l.jsxs("button",{ref:u,type:"button",onClick:()=>S(!N),className:"flex items-center justify-between w-full p-3 text-black dark:text-white outline-none",disabled:g,"aria-haspopup":"true","aria-expanded":N,children:[l.jsx("span",{className:v?"text-left flex-1 truncate":"text-left flex-1 truncate text-gray-400 dark:text-gray-500 text-sm opacity-70",children:v?f(`contact.form.subject.options.${v}`):F}),l.jsx("svg",{className:"w-4 h-4 ml-2 flex-shrink-0 transition-transform duration-300 "+(N?"rotate-180":""),fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),l.jsxs("div",{className:"transition-all duration-300 overflow-hidden "+(N?"max-h-40":"max-h-0"),children:[l.jsx("div",{className:"h-px bg-black dark:bg-white"}),l.jsx("button",{type:"button",onClick:()=>{y("item-1"),S(!1)},className:"w-full text-left p-3 text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200 outline-none border-0",children:f("contact.form.subject.options.item-1")}),l.jsx("button",{type:"button",onClick:()=>{y("item-2"),S(!1)},className:"w-full text-left p-3 text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200 outline-none border-0",children:f("contact.form.subject.options.item-2")}),l.jsx("button",{type:"button",onClick:()=>{y("item-3"),S(!1)},className:"w-full text-left p-3 text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200 outline-none border-0",children:f("contact.form.subject.options.item-3")})]})]}),"item-3"===v&&l.jsx("input",{...e("subject",{required:"item-3"===v,maxLength:100}),ref:p,type:"text",id:"subject",name:"subject",placeholder:I?"":P,onFocus:()=>O(!0),onBlur:e=>!e.target.value&&O(!1),className:"block w-full p-3 border border-black rounded-md bg-white text-black dark:bg-black dark:text-white dark:border-white focus:outline-none focus:shadow-lg focus:scale-[1.01] transition-all duration-200 placeholder:text-sm placeholder:opacity-70",disabled:g,"aria-invalid":c.subject?"true":"false"}),c.subject&&"item-3"===v&&l.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:f(`contact.form.subject.errors.${c.subject.type}`)})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsxs("label",{htmlFor:"message",className:"text-md md:text-lg font-semibold block mb-2",children:[f("contact.form.message.title"),l.jsx("span",{className:"text-black dark:text-white",children:" *"})]}),l.jsx("textarea",{...e("message",{required:!0,minLength:10,maxLength:1e4}),id:"message",name:"message",rows:"10",placeholder:U?"":M,onFocus:()=>_(!0),onBlur:e=>!e.target.value&&_(!1),className:"block w-full p-3 border border-black rounded-md bg-white text-black dark:bg-black dark:text-white dark:border-white resize-none focus:outline-none focus:shadow-lg focus:scale-[1.01] transition-all duration-200 placeholder:text-sm placeholder:opacity-70",disabled:g,"aria-invalid":c.message?"true":"false"}),c.message&&l.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:f(`contact.form.message.errors.${c.message.type}`)})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"inline-flex items-center space-x-2",children:[l.jsxs("label",{htmlFor:"privacyPolicy",className:"relative inline-flex items-center cursor-pointer select-none",children:[l.jsx("input",{...e("privacyPolicy",{required:!0}),id:"privacyPolicy",type:"checkbox",disabled:g,"aria-invalid":c.privacyPolicy?"true":"false",className:"sr-only peer"}),l.jsx("div",{className:`\n                  w-2.5 md:w-3.5 h-2.5 md:h-3.5 rounded-sm\n                  bg-indigo-500 hover:bg-indigo-400\n                  dark:bg-indigo-200 dark:hover:bg-indigo-300\n                  transition-colors duration-200\n                  ${g?"opacity-50 cursor-not-allowed":""}\n                `}),l.jsx("svg",{className:"absolute top-0.35 left-0.35 peer-checked:block hidden w-2.5 md:w-3.5 h-2.5 md:h-3.5 text-white dark:text-black",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})]}),l.jsxs("span",{className:"text-xs md:text-sm lg:text-base text-black dark:text-white",children:[l.jsx(o,{i18nKey:"contact.form.privacyPolicy.label",children:l.jsx("a",{href:"/policies/privacy",target:"_blank",rel:"noopener noreferrer",className:"underline font-bold",children:"privacy policy"})}),l.jsx("span",{className:"text-black dark:text-white",children:" *"})]})]}),c.privacyPolicy&&l.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:f(`contact.form.privacyPolicy.errors.${c.privacyPolicy.type}`)})]}),l.jsx("button",{type:"submit",className:"md:transform md:hover:scale-110 md:transition-all md:duration-300 text-md text-white rounded-lg px-4 md:px-5 py-3 md:py-4 text-center mr-3 md:mr-0 min-h-[48px]\n            "+(g?"bg-indigo-400 cursor-not-allowed":"bg-indigo-500 hover:bg-indigo-400 dark:bg-indigo-200 dark:text-black dark:hover:bg-indigo-300"),"aria-label":f("contact.form.submission"),disabled:g,children:f(g?"contact.form.submitting":"contact.form.submission")}),j&&l.jsx("p",{className:"mt-4 text-sm text-red-600 dark:text-red-300",role:"alert",children:j})]}),l.jsx(h,{ref:d,siteKey:"6LdzpqwpAAAAAHMGS_mfybgvANIGXoIlrcTH2iij",action:"contact"})]})}),p=e.memo(function(){t.useEffect(()=>{window.scrollTo(0,0)},[]);const{t:e}=s();return l.jsxs("div",{id:"contact",className:"Contact flex flex-col min-h-screen w-4/5 mx-auto bg-white text-black dark:bg-black dark:text-white pt-24 md:pt-36 lg:pt-48",children:[l.jsx(d,{title:`${e("contact.title")} | ilijaruzic.rs`,description:e("contact.description"),robots:"index, follow"}),l.jsx(m,{heading:e("contact.title"),paragraphs:[e("contact.subtitle")]}),l.jsx("div",{className:"pt-6 pb-12",children:l.jsxs("dl",{className:"max-w-md text-black divide-y divide-indigo-400 dark:text-white dark:divide-indigo-200",children:[l.jsx("div",{className:"py-4",children:l.jsxs("div",{className:"md:transform md:hover:scale-110 md:transition-all md:duration-300 md:origin-left flex flex-row gap-4 items-center",children:[l.jsx("dt",{className:"text-base xd:text-lg sm:text-xl",children:l.jsx(n,{className:"text-black dark:text-white"})}),l.jsx("dd",{className:"text-sm xd:text-base sm:text-lg font-semibold",children:l.jsx("a",{href:`mailto:${e("contact.email-link")}`,children:e("contact.email-link")})})]})}),l.jsx("div",{className:"py-4",children:l.jsxs("div",{className:"md:transform md:hover:scale-110 md:transition-all md:duration-300 md:origin-left flex flex-row gap-4 items-center",children:[l.jsx("dt",{className:"text-base xd:text-lg sm:text-xl",children:l.jsx(i,{className:"text-black dark:text-white"})}),l.jsx("dd",{className:"text-sm xd:text-base sm:text-lg font-semibold",children:l.jsx("a",{href:"tel:+381642430615",target:"_blank",rel:"noreferrer",children:"+381 64 2430615"})})]})}),l.jsx("div",{className:"py-4",children:l.jsxs("div",{className:"md:transform md:hover:scale-110 md:transition-all md:duration-300 md:origin-left flex flex-row gap-4 items-center",children:[l.jsx("dt",{className:"text-base xd:text-lg sm:text-xl",children:l.jsx(c,{className:"text-black dark:text-white"})}),l.jsx("dd",{className:"text-sm xd:text-base sm:text-lg font-semibold",children:l.jsx("a",{href:"https://ko-fi.com/ilijaruzic",target:"_blank",rel:"external nofollow noopener noreferrer",children:e("contact.coffee-link")})})]})})]})}),l.jsx(u,{})]})});export{p as default};
