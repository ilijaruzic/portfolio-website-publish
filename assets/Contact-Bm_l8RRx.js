import{R as e,r as t,C as a,c as r,u as s,j as l,T as c,D as d,E as i,S as n}from"./vendor-react-CqqHOjbk.js";import{S as o}from"./index-DPwYYuyq.js";import{I as m}from"./Intro-CLxSaCOV.js";import"./vendor-other-B5mEX6f0.js";import"./vendor-i18n-CnKatMdP.js";const x=t.forwardRef(({siteKey:e,action:a="contact"},r)=>(t.useEffect(()=>{let t;return window.grecaptcha||(t=document.createElement("script"),t.src=`https://www.google.com/recaptcha/enterprise.js?render=${e}`,t.async=!0,t.defer=!0,t.id="recaptcha-script",document.head.appendChild(t)),()=>{const e=document.querySelector(".grecaptcha-badge");(null==e?void 0:e.parentNode)&&e.parentNode.removeChild(e),t&&t.parentNode&&t.parentNode.removeChild(t),delete window.grecaptcha}},[e]),t.useImperativeHandle(r,()=>({getToken:()=>new Promise((t,r)=>{if(!window.grecaptcha||!window.grecaptcha.enterprise)return r();window.grecaptcha.enterprise.ready(()=>{window.grecaptcha.enterprise.execute(e,{action:a}).then(t).catch(r)})})})),null)),p=e.memo(x),h=e.memo(function(){const{register:e,handleSubmit:d,reset:i,formState:{errors:n}}=a({defaultValues:{name:"",email:"",subject:"",message:"",privacyPolicy:!1}}),o=t.useRef(),m=r(),{t:x}=s(),[h,b]=t.useState(!1),[u,f]=t.useState("");return l.jsxs(l.Fragment,{children:[l.jsxs("form",{acceptCharset:"UTF-8",method:"POST",className:"lg:max-w-screen-md space-y-8",onSubmit:d(async e=>{var t;b(!0),f("");try{const a="contact",r=await(null==(t=o.current)?void 0:t.getToken());if(!r)return f("[error]: reCAPTCHA not loaded or failed"),void b(!1);const{iv:s,data:l}=await async function(e){const t=Uint8Array.from(atob("V1SxF0mcZUt8pLrH7bJ9FOpR+Vjm/SFkKNrOXvBTzQ0="),e=>e.charCodeAt(0)),a=await crypto.subtle.importKey("raw",t,"AES-GCM",!1,["encrypt"]),r=crypto.getRandomValues(new Uint8Array(12)),s=(new TextEncoder).encode(JSON.stringify(e)),l=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},a,s),c=new Uint8Array(l);return{iv:btoa(String.fromCharCode(...r)),data:btoa(String.fromCharCode(...c))}}(e),c={encryptedData:l,iv:s,recaptchaToken:r,expectedAction:a},d=await fetch("https://portfolio-website-contact-form.ilijaruzicx.workers.dev",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(c)}),n=await d.json();if(!d.ok)return f(`[error]: ${null==n?void 0:n.error}`||"[error]: unknown error"),void b(!1);(null==n?void 0:n.success)?(i(),m("../thank-you"),setTimeout(()=>m("../"),5e3)):f(`[error]: ${null==n?void 0:n.error}`||"[error]: unexpected response")}catch(a){f("[error]: unexpected error occurred, try again later")}finally{b(!1)}}),noValidate:!0,children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"name",className:"text-md md:text-lg font-semibold block mb-2",children:[x("contact.form.name.title"),l.jsx("span",{className:"text-slate-500 dark:text-slate-200",children:" *"})]}),l.jsx("input",{...e("name",{required:!0,maxLength:20,pattern:/^(?!.*\d)[\p{L}\p{M}*]+(?: [\p{L}\p{M}*]+)*$/u}),type:"text",id:"name",name:"name",className:"block w-full p-3 border border-black rounded-md bg-white text-black dark:bg-black dark:text-white dark:border-white",disabled:h,"aria-invalid":n.name?"true":"false"}),n.name&&l.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:x(`contact.form.name.errors.${n.name.type}`)})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"email",className:"text-md md:text-lg font-semibold block mb-2",children:[x("contact.form.email.title"),l.jsx("span",{className:"text-slate-500 dark:text-slate-200",children:" *"})]}),l.jsx("input",{...e("email",{required:!0,pattern:/^[\p{L}\p{M}\d._%+-]+@[^\W_]+[\p{L}\p{M}\d.-]+\.[\p{L}\p{M}]{2,}$/u}),type:"text",id:"email",name:"email",className:"block w-full p-3 border border-black rounded-md bg-white text-black dark:bg-black dark:text-white dark:border-white",disabled:h,"aria-invalid":n.email?"true":"false"}),n.email&&l.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:x(`contact.form.email.errors.${n.email.type}`)})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"subject",className:"text-md md:text-lg font-semibold block mb-2",children:[x("contact.form.subject.title"),l.jsx("span",{className:"text-slate-500 dark:text-slate-200",children:" *"})]}),l.jsx("input",{...e("subject",{required:!0,maxLength:100}),type:"text",id:"subject",name:"subject",className:"block w-full p-3 border border-black rounded-md bg-white text-black dark:bg-black dark:text-white dark:border-white",disabled:h,"aria-invalid":n.subject?"true":"false"}),n.subject&&l.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:x(`contact.form.subject.errors.${n.subject.type}`)})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsxs("label",{htmlFor:"message",className:"text-md md:text-lg font-semibold block mb-2",children:[x("contact.form.message.title"),l.jsx("span",{className:"text-slate-500 dark:text-slate-200",children:" *"})]}),l.jsx("textarea",{...e("message",{required:!0,minLength:10,maxLength:1e4}),id:"message",name:"message",rows:"10",className:"block w-full p-3 border border-black rounded-md bg-white text-black dark:bg-black dark:text-white dark:border-white resize-none",disabled:h,"aria-invalid":n.message?"true":"false"}),n.message&&l.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:x(`contact.form.message.errors.${n.message.type}`)})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"inline-flex items-center space-x-2",children:[l.jsxs("label",{htmlFor:"privacyPolicy",className:"relative inline-flex items-center cursor-pointer select-none",children:[l.jsx("input",{...e("privacyPolicy",{required:!0}),id:"privacyPolicy",type:"checkbox",disabled:h,"aria-invalid":n.privacyPolicy?"true":"false",className:"sr-only peer"}),l.jsx("div",{className:`\n                  w-2.5 md:w-3.5 h-2.5 md:h-3.5 rounded-sm\n                  bg-slate-500 hover:bg-slate-400\n                  dark:bg-slate-200 dark:hover:bg-slate-300\n                  transition-colors duration-200\n                  ${h?"opacity-50 cursor-not-allowed":""}\n                `}),l.jsx("svg",{className:"absolute top-0.35 left-0.35 peer-checked:block hidden w-2.5 md:w-3.5 h-2.5 md:h-3.5 text-white dark:text-black",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})]}),l.jsx("span",{className:"text-xs md:text-sm lg:text-base text-black dark:text-white",children:l.jsx(c,{i18nKey:"contact.form.privacyPolicy.label",children:l.jsx("a",{href:"/policies/privacy",target:"_blank",rel:"noopener noreferrer",className:"underline font-bold",children:"privacy policy"})})}),l.jsx("span",{className:"text-slate-500 dark:text-slate-200",children:" *"})]}),n.privacyPolicy&&l.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:x(`contact.form.privacyPolicy.errors.${n.privacyPolicy.type}`)})]}),l.jsx("button",{type:"submit",className:"md:transform md:hover:scale-110 md:transition-all md:duration-300 text-md text-white rounded-lg px-4 md:px-5 py-3 md:py-4 text-center mr-3 md:mr-0 min-h-[48px]\n            "+(h?"bg-slate-400 cursor-not-allowed":"bg-slate-500 hover:bg-slate-400 dark:bg-slate-200 dark:text-black dark:hover:bg-slate-300"),"aria-label":x("contact.form.submission"),disabled:h,children:x(h?"contact.form.submitting":"contact.form.submission")}),u&&l.jsx("p",{className:"mt-4 text-sm text-red-600 dark:text-red-300",role:"alert",children:u})]}),l.jsx(p,{ref:o,siteKey:"6LdzpqwpAAAAAHMGS_mfybgvANIGXoIlrcTH2iij",action:"contact"})]})}),b=e.memo(function(){t.useEffect(()=>{window.scrollTo(0,0)},[]);const{t:e}=s();return l.jsxs("div",{id:"contact",className:"Contact flex flex-col min-h-screen w-4/5 mx-auto bg-white text-black dark:bg-black dark:text-white pt-24 md:pt-36 lg:pt-48",children:[l.jsx(o,{title:`${e("contact.title")} | ilijaruzic.rs`,description:e("contact.description"),robots:"index, follow"}),l.jsx(m,{heading:e("contact.title"),paragraphs:[e("contact.subtitle")]}),l.jsx("div",{className:"pt-6 pb-12",children:l.jsxs("dl",{className:"max-w-md text-black divide-y divide-slate-200 dark:text-white dark:divide-slate-700",children:[l.jsxs("div",{className:"md:transform md:hover:scale-110 md:transition-all md:duration-300 flex flex-row gap-4 py-4 items-center",children:[l.jsx("dt",{className:"text-base xd:text-lg sm:text-xl",children:l.jsx(d,{className:"text-black dark:text-white"})}),l.jsx("dd",{className:"text-sm xd:text-base sm:text-lg font-semibold",children:l.jsx("a",{href:`mailto:${e("contact.email-link")}`,children:e("contact.email-link")})})]}),l.jsxs("div",{className:"md:transform md:hover:scale-110 md:transition-all md:duration-300 flex flex-row gap-4 py-4 items-center",children:[l.jsx("dt",{className:"text-base xd:text-lg sm:text-xl",children:l.jsx(i,{className:"text-black dark:text-white"})}),l.jsx("dd",{className:"text-sm xd:text-base sm:text-lg font-semibold",children:l.jsx("a",{href:"tel:+381642430615",target:"_blank",rel:"noreferrer",children:"+381 64 2430615"})})]}),l.jsxs("div",{className:"md:transform md:hover:scale-110 md:transition-all md:duration-300 flex flex-row gap-4 py-4 items-center",children:[l.jsx("dt",{className:"text-base xd:text-lg sm:text-xl",children:l.jsx(n,{className:"text-black dark:text-white"})}),l.jsx("dd",{className:"text-sm xd:text-base sm:text-lg font-semibold",children:l.jsx("a",{href:"https://ko-fi.com/ilijaruzic",target:"_blank",rel:"external nofollow noopener noreferrer",children:e("contact.coffee-link")})})]})]})}),l.jsx(h,{})]})});export{b as default};
