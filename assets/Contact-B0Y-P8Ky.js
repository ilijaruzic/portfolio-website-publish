import{R as e,r as t,C as r,c as a,u as s,j as i,T as d,D as l,E as n,S as o}from"./vendor-react-CqqHOjbk.js";import{S as c}from"./index-DHpXmOpy.js";import{I as m}from"./Intro-CLxSaCOV.js";import"./vendor-other-B5mEX6f0.js";import"./vendor-i18n-CnKatMdP.js";const x=t.forwardRef(({siteKey:e,action:r="contact"},a)=>(t.useEffect(()=>{let t;return window.grecaptcha||(t=document.createElement("script"),t.src=`https://www.google.com/recaptcha/enterprise.js?render=${e}`,t.async=!0,t.defer=!0,t.id="recaptcha-script",document.head.appendChild(t)),()=>{const e=document.querySelector(".grecaptcha-badge");(null==e?void 0:e.parentNode)&&e.parentNode.removeChild(e),t&&t.parentNode&&t.parentNode.removeChild(t),delete window.grecaptcha}},[e]),t.useImperativeHandle(a,()=>({getToken:()=>new Promise((t,a)=>{if(!window.grecaptcha||!window.grecaptcha.enterprise)return a();window.grecaptcha.enterprise.ready(()=>{window.grecaptcha.enterprise.execute(e,{action:r}).then(t).catch(a)})})})),null)),p=e.memo(x),h=e.memo(function(){const{register:e,handleSubmit:l,reset:n,formState:{errors:o}}=r({defaultValues:{name:"",email:"",subject:"",message:"",privacyPolicy:!1}}),c=t.useRef(),m=a(),{t:x}=s(),[h,b]=t.useState(!1),[u,g]=t.useState("");return i.jsxs(i.Fragment,{children:[i.jsxs("form",{acceptCharset:"UTF-8",method:"POST",className:"lg:max-w-screen-md space-y-8",onSubmit:l(async e=>{var t;b(!0),g("");try{const r="contact",a=await(null==(t=c.current)?void 0:t.getToken());if(!a)return g("[error]: reCAPTCHA not loaded or failed"),void b(!1);const{iv:s,data:i}=await async function(e){const t=Uint8Array.from(atob("V1SxF0mcZUt8pLrH7bJ9FOpR+Vjm/SFkKNrOXvBTzQ0="),e=>e.charCodeAt(0)),r=await crypto.subtle.importKey("raw",t,"AES-GCM",!1,["encrypt"]),a=crypto.getRandomValues(new Uint8Array(12)),s=(new TextEncoder).encode(JSON.stringify(e)),i=await crypto.subtle.encrypt({name:"AES-GCM",iv:a},r,s),d=new Uint8Array(i);return{iv:btoa(String.fromCharCode(...a)),data:btoa(String.fromCharCode(...d))}}(e),d={encryptedData:i,iv:s,recaptchaToken:a,expectedAction:r},l=await fetch("https://portfolio-website-contact-form.ilijaruzicx.workers.dev",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(d)}),o=await l.json();if(!l.ok)return g(`[error]: ${null==o?void 0:o.error}`||"[error]: unknown error"),void b(!1);(null==o?void 0:o.success)?(n(),m("../thank-you"),setTimeout(()=>m("../"),5e3)):g(`[error]: ${null==o?void 0:o.error}`||"[error]: unexpected response")}catch(r){g("[error]: unexpected error occurred, try again later")}finally{b(!1)}}),noValidate:!0,children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"name",className:"text-md md:text-lg font-semibold block mb-2",children:[x("contact.form.name.title"),i.jsx("span",{className:"text-indigo-500 dark:text-indigo-200",children:" *"})]}),i.jsx("input",{...e("name",{required:!0,maxLength:20,pattern:/^(?!.*\d)[\p{L}\p{M}*]+(?: [\p{L}\p{M}*]+)*$/u}),type:"text",id:"name",name:"name",className:"block w-full p-3 border border-black rounded-md bg-white text-black dark:bg-black dark:text-white dark:border-white",disabled:h,"aria-invalid":o.name?"true":"false"}),o.name&&i.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:x(`contact.form.name.errors.${o.name.type}`)})]}),i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"email",className:"text-md md:text-lg font-semibold block mb-2",children:[x("contact.form.email.title"),i.jsx("span",{className:"text-indigo-500 dark:text-indigo-200",children:" *"})]}),i.jsx("input",{...e("email",{required:!0,pattern:/^[\p{L}\p{M}\d._%+-]+@[^\W_]+[\p{L}\p{M}\d.-]+\.[\p{L}\p{M}]{2,}$/u}),type:"text",id:"email",name:"email",className:"block w-full p-3 border border-black rounded-md bg-white text-black dark:bg-black dark:text-white dark:border-white",disabled:h,"aria-invalid":o.email?"true":"false"}),o.email&&i.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:x(`contact.form.email.errors.${o.email.type}`)})]}),i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"subject",className:"text-md md:text-lg font-semibold block mb-2",children:[x("contact.form.subject.title"),i.jsx("span",{className:"text-indigo-500 dark:text-indigo-200",children:" *"})]}),i.jsx("input",{...e("subject",{required:!0,maxLength:100}),type:"text",id:"subject",name:"subject",className:"block w-full p-3 border border-black rounded-md bg-white text-black dark:bg-black dark:text-white dark:border-white",disabled:h,"aria-invalid":o.subject?"true":"false"}),o.subject&&i.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:x(`contact.form.subject.errors.${o.subject.type}`)})]}),i.jsxs("div",{className:"sm:col-span-2",children:[i.jsxs("label",{htmlFor:"message",className:"text-md md:text-lg font-semibold block mb-2",children:[x("contact.form.message.title"),i.jsx("span",{className:"text-indigo-500 dark:text-indigo-200",children:" *"})]}),i.jsx("textarea",{...e("message",{required:!0,minLength:10,maxLength:1e4}),id:"message",name:"message",rows:"10",className:"block w-full p-3 border border-black rounded-md bg-white text-black dark:bg-black dark:text-white dark:border-white resize-none",disabled:h,"aria-invalid":o.message?"true":"false"}),o.message&&i.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:x(`contact.form.message.errors.${o.message.type}`)})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"inline-flex items-center space-x-2",children:[i.jsxs("label",{htmlFor:"privacyPolicy",className:"relative inline-flex items-center cursor-pointer select-none",children:[i.jsx("input",{...e("privacyPolicy",{required:!0}),id:"privacyPolicy",type:"checkbox",disabled:h,"aria-invalid":o.privacyPolicy?"true":"false",className:"sr-only peer"}),i.jsx("div",{className:`\n                  w-2.5 md:w-3.5 h-2.5 md:h-3.5 rounded-sm\n                  bg-indigo-500 hover:bg-indigo-400\n                  dark:bg-indigo-200 dark:hover:bg-indigo-300\n                  transition-colors duration-200\n                  ${h?"opacity-50 cursor-not-allowed":""}\n                `}),i.jsx("svg",{className:"absolute top-0.35 left-0.35 peer-checked:block hidden w-2.5 md:w-3.5 h-2.5 md:h-3.5 text-white dark:text-black",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})]}),i.jsx("span",{className:"text-xs md:text-sm lg:text-base text-black dark:text-white",children:i.jsx(d,{i18nKey:"contact.form.privacyPolicy.label",children:i.jsx("a",{href:"/policies/privacy",target:"_blank",rel:"noopener noreferrer",className:"underline font-bold",children:"privacy policy"})})}),i.jsx("span",{className:"text-indigo-500 dark:text-indigo-200",children:" *"})]}),o.privacyPolicy&&i.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:x(`contact.form.privacyPolicy.errors.${o.privacyPolicy.type}`)})]}),i.jsx("button",{type:"submit",className:"md:transform md:hover:scale-110 md:transition-all md:duration-300 text-md text-white rounded-lg px-4 md:px-5 py-3 md:py-4 text-center mr-3 md:mr-0 min-h-[48px]\n            "+(h?"bg-indigo-400 cursor-not-allowed":"bg-indigo-500 hover:bg-indigo-400 dark:bg-indigo-200 dark:text-black dark:hover:bg-indigo-300"),"aria-label":x("contact.form.submission"),disabled:h,children:x(h?"contact.form.submitting":"contact.form.submission")}),u&&i.jsx("p",{className:"mt-4 text-sm text-red-600 dark:text-red-300",role:"alert",children:u})]}),i.jsx(p,{ref:c,siteKey:"6LdzpqwpAAAAAHMGS_mfybgvANIGXoIlrcTH2iij",action:"contact"})]})}),b=e.memo(function(){t.useEffect(()=>{window.scrollTo(0,0)},[]);const{t:e}=s();return i.jsxs("div",{id:"contact",className:"Contact flex flex-col min-h-screen w-4/5 mx-auto bg-white text-black dark:bg-black dark:text-white pt-24 md:pt-36 lg:pt-48",children:[i.jsx(c,{title:`${e("contact.title")} | ilijaruzic.rs`,description:e("contact.description"),robots:"index, follow"}),i.jsx(m,{heading:e("contact.title"),paragraphs:[e("contact.subtitle")]}),i.jsx("div",{className:"pt-6 pb-12",children:i.jsxs("dl",{className:"max-w-md text-black divide-y divide-indigo-200 dark:text-white dark:divide-indigo-700",children:[i.jsxs("div",{className:"md:transform md:hover:scale-110 md:transition-all md:duration-300 flex flex-row gap-4 py-4 items-center",children:[i.jsx("dt",{className:"text-base xd:text-lg sm:text-xl",children:i.jsx(l,{className:"text-black dark:text-white"})}),i.jsx("dd",{className:"text-sm xd:text-base sm:text-lg font-semibold",children:i.jsx("a",{href:`mailto:${e("contact.email-link")}`,children:e("contact.email-link")})})]}),i.jsxs("div",{className:"md:transform md:hover:scale-110 md:transition-all md:duration-300 flex flex-row gap-4 py-4 items-center",children:[i.jsx("dt",{className:"text-base xd:text-lg sm:text-xl",children:i.jsx(n,{className:"text-black dark:text-white"})}),i.jsx("dd",{className:"text-sm xd:text-base sm:text-lg font-semibold",children:i.jsx("a",{href:"tel:+381642430615",target:"_blank",rel:"noreferrer",children:"+381 64 2430615"})})]}),i.jsxs("div",{className:"md:transform md:hover:scale-110 md:transition-all md:duration-300 flex flex-row gap-4 py-4 items-center",children:[i.jsx("dt",{className:"text-base xd:text-lg sm:text-xl",children:i.jsx(o,{className:"text-black dark:text-white"})}),i.jsx("dd",{className:"text-sm xd:text-base sm:text-lg font-semibold",children:i.jsx("a",{href:"https://ko-fi.com/ilijaruzic",target:"_blank",rel:"external nofollow noopener noreferrer",children:e("contact.coffee-link")})})]})]})}),i.jsx(h,{})]})});export{b as default};
