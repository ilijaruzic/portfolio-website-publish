import{R as e,r as t,D as a,c as r,u as s,j as l,T as o,E as i,J as n,S as c}from"./vendor-react-HKm_9Y_d.js";import{B as d,S as m}from"./index-C3juYS4K.js";import{I as x}from"./Intro-DZWZYsFI.js";import"./vendor-other-BbrUZ2Se.js";import"./vendor-i18n-CoPuqphE.js";const u=Object.freeze({RECAPTCHA_FAILED:"cf_err_001",ENCRYPTION_FAILED:"cf_err_002",FETCH_REQUEST_FAILED:"cf_err_003",SERVER_VALIDATION_FAILED:"cf_err_004",INVALID_RESPONSE_FORMAT:"cf_err_005"}),h=t.forwardRef(({siteKey:e,action:a="contact"},r)=>(t.useEffect(()=>{let t;return window.grecaptcha||(t=document.createElement("script"),t.src=`https://www.google.com/recaptcha/enterprise.js?render=${e}`,t.async=!0,t.defer=!0,t.id="recaptcha-script",document.head.appendChild(t)),()=>{const e=document.querySelector(".grecaptcha-badge");(null==e?void 0:e.parentNode)&&e.parentNode.removeChild(e),t&&t.parentNode&&t.parentNode.removeChild(t),delete window.grecaptcha}},[e]),t.useImperativeHandle(r,()=>({getToken:()=>new Promise((t,r)=>{if(!window.grecaptcha||!window.grecaptcha.enterprise)return r();window.grecaptcha.enterprise.ready(()=>{window.grecaptcha.enterprise.execute(e,{action:a}).then(t).catch(r)})})})),null)),p=e.memo(h),b=e.memo(function(){const{register:e,handleSubmit:i,reset:n,setValue:c,formState:{errors:m}}=a({mode:"onSubmit",reValidateMode:"onChange",defaultValues:{name:"",email:"",subject:"",subjectType:"",message:"",privacyPolicy:!1}}),x=t.useRef(),h=t.useRef(),b=t.useRef(),f=t.useRef(),g=t.useRef(),j=r(),{t:k}=s(),{setBannerMessage:w,setBannerType:y}=t.useContext(d),[v,N]=t.useState(!1),[S,A]=t.useState(""),[E,T]=t.useState(!1),[_,C]=t.useState(""),[F,L]=t.useState(""),[I,R]=t.useState(""),[P,O]=t.useState(""),[V,M]=t.useState(""),[D,$]=t.useState(!1),[B,W]=t.useState(!1),[q,z]=t.useState(!1),[H,U]=t.useState(!1);t.useEffect(()=>{const e=k("contact.form.name.placeholder"),t=k("contact.form.email.placeholder"),a=k("contact.form.subject.placeholder"),r=k("contact.form.subject.other-placeholder"),s=k("contact.form.message.placeholder");let l=0,o=0,i=0,n=0,c=0;const d=(e,t)=>{const{textWidth:a,inputWidth:r}=((e,t)=>{if(!t.current)return{textWidth:0,inputWidth:0};const a=document.createElement("canvas").getContext("2d"),r=window.getComputedStyle(t.current),s=r.fontSize,l=r.fontFamily;return a.font=`${s} ${l}`,{textWidth:a.measureText(e).width,inputWidth:"BUTTON"===t.current.tagName||"SPAN"===t.current.tagName?t.current.offsetWidth-60:t.current.offsetWidth-24}})(e,t);if(a>r&&r>0){let t=Math.floor(e.length*(r/a));return"..."+e.slice(e.length-t)}return e},m=setInterval(()=>{if(!D&&l<=e.length){const t=e.slice(0,l);C(d(t,h)),l++}else!D&&l>e.length+20?l=0:D||l++;if(!B&&o<=t.length){const e=t.slice(0,o);L(d(e,b)),o++}else!B&&o>t.length+20?o=0:B||o++;if(i<a.length){const e=a.slice(0,i+1);R(d(e,f)),i++}else i>=a.length&&i<a.length+20?(R(d(a,f)),i++):i=0;if(!q&&n<=r.length){const e=r.slice(0,n);O(d(e,g)),n++}else!q&&n>r.length+20?n=0:q||n++;!H&&c<=s.length?(M(s.slice(0,c)),c++):!H&&c>s.length+20?c=0:H||c++},80);return()=>clearInterval(m)},[k,D,B,q,H]);return l.jsxs(l.Fragment,{children:[l.jsxs("form",{acceptCharset:"UTF-8",method:"POST",className:"lg:max-w-screen-md space-y-8",onSubmit:i(async e=>{var t;N(!0);try{const r="contact",s=await(null==(t=x.current)?void 0:t.getToken());if(!s)return y("error"),w(u.RECAPTCHA_FAILED),void N(!1);let l;"item-1"===S?l=k("contact.form.subject.formatted.item-1"):"item-2"===S?l=k("contact.form.subject.formatted.item-2"):"item-3"===S&&(l=e.subject);const o={...e,subject:l};let i,c;try{const e=await async function(e,t){const a=Uint8Array.from(atob(t),e=>e.charCodeAt(0)),r=await crypto.subtle.importKey("raw",a,"AES-GCM",!1,["encrypt"]),s=crypto.getRandomValues(new Uint8Array(12)),l=(new TextEncoder).encode(JSON.stringify(e)),o=await crypto.subtle.encrypt({name:"AES-GCM",iv:s},r,l),i=new Uint8Array(o);return{iv:btoa(String.fromCharCode(...s)),data:btoa(String.fromCharCode(...i))}}(o,"V1SxF0mcZUt8pLrH7bJ9FOpR+Vjm/SFkKNrOXvBTzQ0=");i=e.iv,c=e.data}catch(a){return y("error?"),w(u.ENCRYPTION_FAILED),void N(!1)}const d={encryptedData:c,iv:i,recaptchaToken:s,expectedAction:r},m=await fetch("https://portfolio-website-contact-form.ilijaruzicx.workers.dev",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},body:JSON.stringify(d)}),h=await m.json();if(!m.ok)return y("error"),w(u.SERVER_VALIDATION_FAILED),void N(!1);(null==h?void 0:h.success)?(w(""),n(),j("../thank-you"),setTimeout(()=>j("../"),5e3)):(y("error"),w(u.INVALID_RESPONSE_FORMAT))}catch(a){y("error"),w(u.FETCH_REQUEST_FAILED)}finally{N(!1)}}),noValidate:!0,children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"name",className:"text-md md:text-lg font-semibold block mb-2",children:[k("contact.form.name.title"),l.jsx("span",{className:"text-black dark:text-white",children:" *"})]}),l.jsx("input",{...e("name",{required:!0,maxLength:20,pattern:/^(?!.*\d)[\p{L}\p{M}*]+(?: [\p{L}\p{M}*]+)*$/u}),ref:t=>{e("name").ref(t),h.current=t},type:"text",id:"name",placeholder:D?"":_,onFocus:()=>$(!0),onBlur:e=>!e.target.value&&$(!1),className:"block w-full p-3 border border-black rounded-md bg-white text-black dark:bg-black dark:text-white dark:border-white focus:outline-none focus:shadow-lg focus:scale-[1.01] transition-all duration-200 placeholder:text-sm placeholder:opacity-70",disabled:v,"aria-invalid":m.name?"true":"false"}),m.name&&l.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:k(`contact.form.name.errors.${m.name.type}`)})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"email",className:"text-md md:text-lg font-semibold block mb-2",children:[k("contact.form.email.title"),l.jsx("span",{className:"text-black dark:text-white",children:" *"})]}),l.jsx("input",{...e("email",{required:!0,pattern:/^[\p{L}\p{M}\d._%+-]+@[^\W_]+[\p{L}\p{M}\d.-]+\.[\p{L}\p{M}]{2,}$/u}),ref:t=>{e("email").ref(t),b.current=t},type:"text",id:"email",placeholder:B?"":F,onFocus:()=>W(!0),onBlur:e=>!e.target.value&&W(!1),className:"block w-full p-3 border border-black rounded-md bg-white text-black dark:bg-black dark:text-white dark:border-white focus:outline-none focus:shadow-lg focus:scale-[1.01] transition-all duration-200 placeholder:text-sm placeholder:opacity-70",disabled:v,"aria-invalid":m.email?"true":"false"}),m.email&&l.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:k(`contact.form.email.errors.${m.email.type}`)})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"subject",className:"text-md md:text-lg font-semibold block mb-2",children:[k("contact.form.subject.title"),l.jsx("span",{className:"text-black dark:text-white",children:" *"})]}),l.jsxs("div",{className:"mb-3 border border-black dark:border-white rounded-md bg-white dark:bg-black transition-all duration-200 "+(E?"shadow-lg scale-[1.01]":""),children:[l.jsxs("button",{ref:f,type:"button",onClick:()=>T(!E),className:"flex items-center justify-between w-full p-3 text-black dark:text-white outline-none",disabled:v,"aria-haspopup":"true","aria-expanded":E,children:[l.jsx("span",{className:S?"text-left flex-1 truncate":"text-left flex-1 truncate text-gray-400 dark:text-gray-500 text-sm opacity-70",children:S?k(`contact.form.subject.options.${S}`):I}),l.jsx("svg",{className:"w-4 h-4 ml-2 flex-shrink-0 transition-transform duration-300 "+(E?"rotate-180":""),fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),l.jsxs("div",{className:"transition-all duration-300 overflow-hidden "+(E?"max-h-40":"max-h-0"),children:[l.jsx("div",{className:"h-px bg-black dark:bg-white"}),l.jsx("button",{type:"button",onClick:()=>{A("item-1"),c("subjectType","item-1",{shouldValidate:!0}),T(!1)},className:"w-full text-left p-3 text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200 outline-none border-0",children:k("contact.form.subject.options.item-1")}),l.jsx("button",{type:"button",onClick:()=>{A("item-2"),c("subjectType","item-2",{shouldValidate:!0}),T(!1)},className:"w-full text-left p-3 text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200 outline-none border-0",children:k("contact.form.subject.options.item-2")}),l.jsx("button",{type:"button",onClick:()=>{A("item-3"),c("subjectType","item-3",{shouldValidate:!0}),T(!1)},className:"w-full text-left p-3 text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200 outline-none border-0",children:k("contact.form.subject.options.item-3")})]})]}),l.jsx("input",{...e("subjectType",{required:!0}),type:"hidden",value:S}),m.subjectType&&l.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:k("contact.form.subject.errors.required")}),"item-3"===S&&l.jsx("input",{...e("subject",{required:"item-3"===S,maxLength:100}),ref:t=>{e("subject").ref(t),g.current=t},type:"text",id:"subject",placeholder:q?"":P,onFocus:()=>z(!0),onBlur:e=>!e.target.value&&z(!1),className:"block w-full p-3 border border-black rounded-md bg-white text-black dark:bg-black dark:text-white dark:border-white focus:outline-none focus:shadow-lg focus:scale-[1.01] transition-all duration-200 placeholder:text-sm placeholder:opacity-70",disabled:v,"aria-invalid":m.subject?"true":"false"}),m.subject&&"item-3"===S&&l.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:k(`contact.form.subject.errors.${m.subject.type}`)})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsxs("label",{htmlFor:"message",className:"text-md md:text-lg font-semibold block mb-2",children:[k("contact.form.message.title"),l.jsx("span",{className:"text-black dark:text-white",children:" *"})]}),l.jsx("textarea",{...e("message",{required:!0,minLength:10,maxLength:1e4}),id:"message",rows:"10",placeholder:H?"":V,onFocus:()=>U(!0),onBlur:e=>!e.target.value&&U(!1),className:"block w-full p-3 border border-black rounded-md bg-white text-black dark:bg-black dark:text-white dark:border-white resize-none focus:outline-none focus:shadow-lg focus:scale-[1.01] transition-all duration-200 placeholder:text-sm placeholder:opacity-70",disabled:v,"aria-invalid":m.message?"true":"false"}),m.message&&l.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:k(`contact.form.message.errors.${m.message.type}`)})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"inline-flex items-center space-x-2",children:[l.jsxs("label",{htmlFor:"privacyPolicy",className:"relative inline-flex items-center cursor-pointer select-none",children:[l.jsx("input",{...e("privacyPolicy",{required:!0}),id:"privacyPolicy",type:"checkbox",disabled:v,"aria-invalid":m.privacyPolicy?"true":"false",className:"sr-only peer"}),l.jsx("div",{className:`\n                  w-2.5 md:w-3.5 h-2.5 md:h-3.5 rounded-sm\n                  bg-indigo-500 hover:bg-indigo-400\n                  dark:bg-indigo-200 dark:hover:bg-indigo-300\n                  transition-colors duration-200\n                  ${v?"opacity-50 cursor-not-allowed":""}\n                `}),l.jsx("svg",{className:"absolute top-0.35 left-0.35 peer-checked:block hidden w-2.5 md:w-3.5 h-2.5 md:h-3.5 text-white dark:text-black",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})]}),l.jsxs("span",{className:"text-xs md:text-sm lg:text-base text-black dark:text-white",children:[l.jsx(o,{i18nKey:"contact.form.privacyPolicy.label",children:l.jsx("a",{href:"/policies/privacy",target:"_blank",rel:"noopener noreferrer",className:"underline font-bold",children:"privacy policy"})}),l.jsx("span",{className:"text-black dark:text-white",children:" *"})]})]}),m.privacyPolicy&&l.jsx("p",{className:"text-xs md:text-sm text-red-500 dark:text-red-200 pt-2",role:"alert",children:k(`contact.form.privacyPolicy.errors.${m.privacyPolicy.type}`)})]}),l.jsx("button",{type:"submit",className:"md:transform md:hover:scale-110 md:transition-all md:duration-300 text-md text-white rounded-lg px-4 md:px-5 py-3 md:py-4 text-center mr-3 md:mr-0 min-h-[48px]\n            "+(v?"bg-indigo-400 cursor-not-allowed":"bg-indigo-500 hover:bg-indigo-400 dark:bg-indigo-200 dark:text-black dark:hover:bg-indigo-300"),"aria-label":k("contact.form.submission"),disabled:v,children:k(v?"contact.form.submitting":"contact.form.submission")})]}),l.jsx(p,{ref:x,siteKey:"6LdzpqwpAAAAAHMGS_mfybgvANIGXoIlrcTH2iij",action:"contact"})]})}),f=e.memo(function(){t.useEffect(()=>{window.scrollTo({top:0,behavior:"instant"})},[]);const{t:e}=s();return l.jsxs("div",{id:"contact",className:"Contact flex flex-col min-h-screen w-4/5 mx-auto bg-white text-black dark:bg-black dark:text-white pt-24 md:pt-36 lg:pt-48",children:[l.jsx(m,{title:`${e("contact.title")} | ilijaruzic.rs`,description:e("contact.description"),robots:"index, follow"}),l.jsx(x,{heading:e("contact.title"),paragraphs:[e("contact.subtitle")]}),l.jsx("div",{className:"pt-6 pb-12",children:l.jsxs("dl",{className:"max-w-md text-black divide-y divide-indigo-400 dark:text-white dark:divide-indigo-200",children:[l.jsx("div",{className:"py-4",children:l.jsxs("div",{className:"md:transform md:hover:scale-110 md:transition-all md:duration-300 md:origin-left flex flex-row gap-4 items-center",children:[l.jsx("dt",{className:"text-base xd:text-lg sm:text-xl",children:l.jsx(i,{className:"text-black dark:text-white"})}),l.jsx("dd",{className:"text-sm xd:text-base sm:text-lg font-semibold",children:l.jsx("a",{href:`mailto:${e("contact.email-link")}`,children:e("contact.email-link")})})]})}),l.jsx("div",{className:"py-4",children:l.jsxs("div",{className:"md:transform md:hover:scale-110 md:transition-all md:duration-300 md:origin-left flex flex-row gap-4 items-center",children:[l.jsx("dt",{className:"text-base xd:text-lg sm:text-xl",children:l.jsx(n,{className:"text-black dark:text-white"})}),l.jsx("dd",{className:"text-sm xd:text-base sm:text-lg font-semibold",children:l.jsx("a",{href:"tel:+381642430615",target:"_blank",rel:"noreferrer",children:"+381 64 2430615"})})]})}),l.jsx("div",{className:"py-4",children:l.jsxs("div",{className:"md:transform md:hover:scale-110 md:transition-all md:duration-300 md:origin-left flex flex-row gap-4 items-center",children:[l.jsx("dt",{className:"text-base xd:text-lg sm:text-xl",children:l.jsx(c,{className:"text-black dark:text-white"})}),l.jsx("dd",{className:"text-sm xd:text-base sm:text-lg font-semibold",children:l.jsx("a",{href:"https://ko-fi.com/ilijaruzic",target:"_blank",rel:"external nofollow noopener noreferrer",children:e("contact.coffee-link")})})]})})]})}),l.jsx(b,{})]})});export{f as default};
